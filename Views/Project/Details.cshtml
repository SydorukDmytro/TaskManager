@model ProjectDto
@using Microsoft.AspNetCore.Identity
@using TaskManager.dto
@inject UserManager<User> UserManager

@{
    ViewData["Title"] = "Project Details";
    var isAdmin = User.IsInRole("Admin");
    var userId = UserManager.GetUserId(User);
}

<div class="container py-5 bg-dark text-light min-vh-100">
    <div class="mb-4 d-flex justify-content-between align-items-center">
        <h1 class="display-4">@Model.Title</h1>
        <a asp-action="CreateTask" asp-route-projectId="@Model.Id" class="btn btn-success btn-lg">
            + Створити завдання
        </a>
    </div>

    <div class="card bg-secondary text-white shadow-lg">
        <div class="card-body">
            <h5 class="card-subtitle mb-3 text-light">
                Проєкт створено: @Model.CreatedAt.ToString("yyyy-MM-dd") &nbsp;|&nbsp; Автор: @Model.CreatedByUserName
            </h5>
            <p class="card-text fs-5">@Model.Description</p>

            <hr class="border-light" />

            <div class="d-flex justify-content-start gap-3">
                <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning"
                   style="display: @(Model.CreatedByUserId.ToString() == userId || isAdmin ? "inline-block" : "none")">
                    Редагувати
                </a>
                <a asp-action="Delete" asp-route-id="@Model.Id" class="btn btn-danger"
                   style="display: @(Model.CreatedByUserId.ToString() == userId || isAdmin ? "inline-block" : "none")">
                    Видалити
                </a>
                <a asp-action="Index" class="btn btn-outline-light">
                    Назад до списку
                </a>
            </div>
        </div>
    </div>
</div>
